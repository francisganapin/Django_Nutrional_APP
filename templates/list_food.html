{% extends "base.html" %}

{% block title %}Classes{% endblock %}

{% block content %}


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food Data</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
    body {
    padding-top: 20px;
}

.container {
    max-width: 1500px;
    margin: 0 auto;
    background-color: white;
    padding: 20px; /* Add padding for better spacing */
}

.container_color {
    background-color: bisque;
    padding: 20px;
    min-height: 100vh; /* Ensure the background covers at least the full viewport height */
}

h1 {
    text-align: center;
    margin-bottom: 20px;
}

table {
    width: 100%;
    border-collapse: collapse;
}

th, td {
    padding: 12px;
    text-align: left;
    border: 1px solid #dee2e6;
}

thead th {
    background-color: #f8f9fa;
}

/* Optional: Add hover effect to table rows */
tbody tr:hover {
    background-color: #f1f1f1;
}

.search-container {
    text-align: center;
    margin-bottom: 20px;
}

.search-container input, .search-container select {
    margin: 5px;
}


    </style>
</head>
</html>

<body>
<div class="container_color">
<div class="container">
    <h1>Food Data</h1>

    <div class="search-container">
        <input type="text" id="myInput" class="form-control" placeholder="Search..." onkeyup="myFunction()">
    </div>

    <table class="table table-striped">
        <thead>
            <tr>
                <th>Name</th>
                <th>Measure</th>
                <th>Grams</th>
                <th>Calories</th>
                <th>Protein</th>
                <th>Fat</th>
                <th>Saturated Fat</th>
                <th>Fiber</th>
                <th>Carbohydrates</th>
                <th>Category</th>
            </tr>
        </thead>

<article class="content">
        <tbody id="table-data">
            {% for item in data %}
            <tr>
                <td class="name">{{ item.name }}</td>
                <td class="measure">{{ item.measure }}</td>
                <td class="grams">{{ item.grams }}</td>
                <td class="calories">{{ item.calories }}</td>
                <td class="protein">{{ item.protein }}</td>
                <td class="fat">{{ item.fat }}</td>
                <td class="saturated_fat">{{ item.saturated_fat }}</td>
                <td class="fiber">{{ item.fiber }}</td>
                <td class="carbohydrates">{{ item.carbohydrates }}</td>
                <td class="category">{{ item.category }}</td>
            </tr>
            {% endfor %}
        </tbody>
</article>

    </table>

</div>

</div>

</body>



<script>
    function myFunction() {
        // Declare variables
        var input, filter, table, rows, i, txtValue;
        input = document.getElementById('myInput'); // Updated to match the correct ID
        filter = input.value.toUpperCase();
        table = document.getElementById("table-data");
        rows = table.getElementsByTagName('tr');
    
        // Loop through all table rows, and hide those who don't match the search query
        for (i = 0; i < rows.length; i++) { // Updated to start from 0
            let nameColumn = rows[i].getElementsByTagName("td")[0]; // Assuming you want to filter by Name (1st column)
        
            if (nameColumn) {
                let nameValue = nameColumn.textContent || nameColumn.innerText;
                txtValue = (nameValue).toUpperCase(); // Filter by the name
                if (txtValue.indexOf(filter) > -1) {
                    rows[i].style.display = "";
                } else {
                    rows[i].style.display = "none";
                }
            }
        }
    }
</script>

<script>
    document.addEventListener('DOMContentLoaded',function(){
        const content = document.querySelectorAll('.content');
        const itemsPerPage = 5;
        let currentPage = 0;
        const item= Array.from(content.getElementById('tr')).slice(1);


    function showPage(page){
        const startIndex = page * itemsPerPage;
        const endIndex = startIndex + itemsPerPage;
        item.forEach((item,index)=>
    {
        item.classList.toggle('hidden',index < startIndex || index >= endIndex);
    });
        updateActivateButtonState();
    }

    })
</script>

{% endblock %}